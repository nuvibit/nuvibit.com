{{ define "main" }}

<section class="section">
  <div class="container mb-5">
    <div class="row justify-content-center">

			<div class="col-md-3 align-self-center text-center text-md-left">
				<div class="block">
          <h1 class="faq-title font-weight-bold">{{ $.Page.RenderString .Title }}</h1>
				</div>
			</div>
      <div class="col-md-5 text-center p-4 zoom">
				{{ with .Params.faq }}
        {{/* HUGO IMAGE RENDERER */}}
        {{ $img_data := newScratch }}
        {{ $image_class := "img-fluid w-100"}}
        {{ $image_path := .image }}
        {{ $image := resources.Get $image_path }}
        {{ $image_fallback := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s jpg #fafafa q90 Lanczos" (index $resolutions 1))) }}
        {{ $resolutions := (slice "300x" "500x" "800x") }}
        {{ range $index, $resolutions }}
          {{ $image_webp := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s webp q90 Lanczos" .)) }}
          {{ $img_data.Add "srcset_webp" (printf "%s %s," $image_webp (replace . "x" "w")) }}
          {{ $image_jpg := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s jpg #fafafa q90 Lanczos" .)) }}
          {{ $img_data.Add "srcset_jpg" (printf "%s %s," $image_jpg (replace . "x" "w")) }}
        {{ end }}
				{{ $new_size := $image.Resize (index $resolutions 1) }}
        <picture>
          <source type="image/webp" srcset='{{ $img_data.Get "srcset_webp" }}'>
          <source type="image/jpeg" srcset='{{ $img_data.Get "srcset_jpg" }}'>
          <img loading="lazy" class="{{ $image_class }}" src="{{ $image_fallback }}" width="{{ $new_size.Width }}" height="{{ $new_size.Height }}" alt='Illustration of {{ $image_path | replaceRE ".*?([\\w-]+).png" "$1" }}'>
        </picture>
        {{/* HUGO IMAGE RENDERER */}}
        {{ end }}
			</div>
      <hr class="w-75 mt-5 pb-5"/>
    </div>

    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-7">
        <div class="container">
          {{ range $index, $element := (where .Params.faq.items "enable" true) }}
          <h1 class="faq-anchor" id="{{ .anchor }}"></h1>
          <details id="details#{{ .anchor }}" class="faq-detail col-lg-12">
            <summary class="faq-summary">
              <span class="faq-question font-weight-bold">{{ $.Page.RenderString .question }}</span>
              <i class="fas fa-plus"></i>
              <i class="fas fa-minus"></i>
            </summary>
            <p class="faq-text">{{ $.Page.RenderString .answer }}</p>
          </details>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}
