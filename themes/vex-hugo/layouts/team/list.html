{{ define "main" }}
<section class="section">
  <div class="container mb-5">
    <div class="row justify-content-center">
      <div class="col-lg-10 text-center mb-5">
        <h1 class="font-weight-bold">{{.Title}}</h1>
      </div>

      <div class="col-lg-10 text-center text-md-left mb-5">
        <div class="content">
          <p>{{ $.Page.RenderString .Params.about_us.introduction }}</p>
        </div>
      </div>

      <hr class="w-75 mb-40"/>

      {{ range $index, $element := shuffle (where .Params.about_us.items "enable" true) }}
      <div class="row m-3 mt-5 p-3 about-row">
        <div class="col-md-4 text-center mb-5 mb-lg-0 item animated wow fadeIn zoom">
          {{/* HUGO IMAGE RENDERER */}}
          {{ $img_data := newScratch }}
          {{ $image_class := "img-fluid p-4 portrait"}}
          {{ $image_path := .image }}
          {{ $image := resources.Get $image_path }}
          {{ $image_fallback := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s jpg #fafafa q90 Lanczos" (index $resolutions 1))) }}
          {{ $resolutions := (slice "300x" "500x" "800x") }}
          {{ range $index, $resolutions }}
              {{ $image_webp := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s webp q90 Lanczos" .)) }}
              {{ $img_data.Add "srcset_webp" (printf "%s %s," $image_webp (replace . "x" "w")) }}
              {{ $image_jpg := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s jpg #fafafa q90 Lanczos" .)) }}
              {{ $img_data.Add "srcset_jpg" (printf "%s %s," $image_jpg (replace . "x" "w")) }}
          {{ end }}
          {{ $new_size := $image.Resize (index $resolutions 1) }}
          <picture>
              <source type="image/webp" srcset='{{ $img_data.Get "srcset_webp" }}'>
              <source type="image/jpeg" srcset='{{ $img_data.Get "srcset_jpg" }}'>
              <img loading="lazy" class="{{ $image_class }}" src="{{ $image_fallback }}" width="{{ $new_size.Width }}" height="{{ $new_size.Height }}" alt='Profile picture of {{ $image_path | replaceRE ".*?([\\w-]+).(png|jpg)" "$1" }}'>
          </picture>
          {{/* HUGO IMAGE RENDERER */}}
        </div>
        <div class="col-md-8 align-self-center text-center text-md-left about-text">
          <div class="content">
            <h4 class="subheading mb-10 pb-0">{{ $.Page.RenderString .name }}
              <a class="social" href="{{ .linkedin | safeURL }}" class="h2" title="linkedin">
                <i class="fab fa-linkedin m-3"></i>
              </a>
            </h4>
            <h4 class="mb-20">{{ $.Page.RenderString .title }}</h4>
            <p>{{ $.Page.RenderString .content }}</p>
          </div>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>

{{ end }}
