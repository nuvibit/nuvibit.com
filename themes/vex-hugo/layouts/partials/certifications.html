{{ $data := index .Site.Data .Site.Language.Lang }}

{{- if $data.homepage.certifications.enable }}
<section class="gallery" id="certifications">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="heading">
                    {{- with $data.homepage.certifications }}
                    <h4 class="inline-heading-h2">
                        {{ $.Page.RenderString .title }}
                        <a href="{{ .link | absLangURL }}" aria-label='Read more about {{ .Params.image | replaceRE ".*?([\\w-]+).png" "$1" }} certification'>
                            <i class="fa-solid fa-arrow-up-right-from-square"></i>
                        </a>
                    </h4>
                    {{ end }}
                </div>

                <div class="product-slider">
                    {{ range (where .Site.RegularPages "Section" "certifications") }}
                    <div class="block m-3" id="badge-element" data-value="{{ .Permalink }}">
                        <div class="gallery-overlay">
                            <a href="{{ .Permalink }}" class="gallery-popup" aria-label='Read more about {{ .Params.image | replaceRE ".*?([\\w-]+).png" "$1" }} certification'>
                                <i class="fas fa-plus"></i>
                            </a>
                        </div>
                        {{/* HUGO IMAGE RENDERER */}}
                        {{ $image_resolutions := (slice "300x" "500x" "800x") }}
                        {{ $image_data := newScratch }}
                        {{ $image_class := "img-fluid"}}
                        {{ $image_path := .Params.image }}
                        {{ $image_buffer := resources.Get $image_path }}
                        {{ $image_fallback := partial "imageConverter.html" (dict "ImageSrc" $image_buffer "ImgParam" (printf "%s jpg #fafafa q90 Lanczos" (index $image_resolutions 1))) }}
                        {{ range $index, $image_resolutions }}
                        {{ $image_webp := partial "imageConverter.html" (dict "ImageSrc" $image_buffer "ImgParam" (printf "%s webp q90 Lanczos" .)) }}
                        {{ $image_data.Add "srcset_webp" (printf "%s %s," $image_webp (replace . "x" "w")) }}
                        {{ $image_jpg := partial "imageConverter.html" (dict "ImageSrc" $image_buffer "ImgParam" (printf "%s jpg #fafafa q90 Lanczos" .)) }}
                        {{ $image_data.Add "srcset_jpg" (printf "%s %s," $image_jpg (replace . "x" "w")) }}
                        {{ end }}
                        {{ $image_size := $image_buffer.Resize (index $image_resolutions 1) }}
                        <picture>
                        <source type="image/webp" srcset='{{ $image_data.Get "srcset_webp" }}'>
                        <source type="image/jpeg" srcset='{{ $image_data.Get "srcset_jpg" }}'>
                        <img loading="lazy" class="{{ $image_class }}" src="{{ $image_fallback }}" width="{{ $image_size.Width }}" height="{{ $image_size.Height }}" alt='{{ $image_path | replaceRE ".*?([\\w-]+).png" "$1" }} badge'>
                        {{/* HUGO IMAGE RENDERER */}}
                    </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </div>
</section>
{{ end }}