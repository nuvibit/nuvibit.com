{{ define "main" }}

<section class="section">
  <div class="container">
    <div class="row justify-content-center text-center text-md-left">
      {{ with .Params.contact }}
      <div class="col-lg-5 col-sm-6 mb-5">
        <h2 class="font-weight-bold mb-4">{{ $.Page.RenderString .title }}</h2>
        <p>{{ $.Page.RenderString .content }}</p>
        <br>
        <ul class="list-unstyled contact-list">
          {{with .phone}} <li class="mb-3"><a href="tel:{{ . }}"><i class="fas fa-phone mr-3"></i>{{ . }}</a></li>{{ end }}
          {{with .email}} <li class="mb-3"><a href="mailto:{{ . }}"><i class="fas fa-envelope mr-3"></i>{{ . }}</a></li>{{end }}
          {{with .location }} <li class="mb-3"><i class="fas fa-map-marked-alt mr-3"></i>{{ . }}</li>{{ end }}
        </ul>
      </div>
      {{ end }}
      <div class="col-lg-3 col-sm-6 mb-5">
        {{ with .Params.contact }}
        {{/* HUGO IMAGE RENDERER */}}
        {{ $img_data := newScratch }}
        {{ $image_class := "img-fluid w-100"}}
        {{ $image_path := .image }}
        {{ $image := resources.Get $image_path }}
        {{ $image_fallback := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s jpg #fafafa q100 Lanczos" (index site.Params.image_resolutions 1))) }}
        {{ $resolutions := site.Params.image_resolutions }}
        {{ range $index, $resolutions }}
          {{ $image_webp := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s webp q100 Lanczos" .)) }}
          {{ $img_data.Add "srcset_webp" (printf "%s %s," $image_webp (replace . "x" "w")) }}
          {{ $image_jpg := partial "imageConverter.html" (dict "ImageSrc" $image "ImgParam" (printf "%s jpg #fafafa q100 Lanczos" .)) }}
          {{ $img_data.Add "srcset_jpg" (printf "%s %s," $image_jpg (replace . "x" "w")) }}
        {{ end }}
				{{ $new_size := $image.Resize (index site.Params.image_resolutions 1) }}
        <picture>
          <source type="image/webp" srcset='{{ $img_data.Get "srcset_webp" }}'>
          <source type="image/jpeg" srcset='{{ $img_data.Get "srcset_jpg" }}'>
          <img loading="lazy" class="{{ $image_class }}" src="{{ $image_fallback }}" width="{{ $new_size.Width }}" height="{{ $new_size.Height }}" alt='Illustration of {{ $image_path | replaceRE ".*?([\\w-]+).png" "$1" }}'>
        </picture>
        {{/* HUGO IMAGE RENDERER */}}
        {{ end }}
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        {{/* add translation support for iframe after zoho one trial */}}
        <iframe scrolling="no" frameborder="0" class="inline-iframe" src='{{ site.Params.contact_form_url }}'></iframe>
      </div>
    </div>
  </div>
</section>

{{ end }}